<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Teknos TEKNOCEILING Competition</title>

<style>
/* Prevent GitHub Pages or parent site styling from affecting this */
#app, #app * {
  box-sizing: border-box;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  margin: 0;
  padding: 0;
}

:root{
  --brand:#007050;
  --bg:#f5f7f8;
  --card:#ffffff;
  --text:#0f1720;
  --muted:#5b6570;
  --danger:#b00020;
  --ok:#0f9d58;
}

body{ background:var(--bg); }

/* Layout */
#app{ max-width:600px; margin:0 auto; padding:24px; }
.card{ background:var(--card); padding:24px; border-radius:18px; box-shadow:0 4px 24px rgba(0,0,0,0.07); }

/* Typography */
h1{ font-size:26px; font-weight:800; margin-bottom:6px; color:var(--text); }
.sub{ font-size:15px; color:var(--muted); margin-bottom:20px; }

/* Fields */
label{ font-size:15px; font-weight:600; margin-top:14px; display:block; }
input{ width:100%; padding:14px; border-radius:12px; font-size:16px; border:1px solid #dfe5ea; background:#fff; margin-top:6px; }
input:focus{ border-color:var(--brand); outline:none; }

/* Checkboxes */
.checkbox-row{ display:flex; gap:10px; margin-top:14px; font-size:14px; line-height:1.3; }

/* Buttons */
button{ width:100%; padding:14px; border:none; border-radius:12px; font-size:16px; font-weight:700; cursor:pointer; }
button#btnSubmit{ background:var(--brand); color:white; }

/* Messages */
.msg{ display:none; margin-top:16px; padding:14px; border-radius:10px; font-size:15px; border-left:5px solid var(--ok); background:#e9f8ef; }
.msg.error{ border-left-color:var(--danger); background:#ffeef0; }

/* Thank you */
.thankyou{ display:none; text-align:center; padding:40px 10px; }
.thankyou h2{ font-size:28px; margin-bottom:6px; }

/* Kiosk utility */
.kiosk{ position:fixed; right:14px; bottom:14px; display:flex; gap:8px; }
.kiosk button{ width:auto; padding:8px 12px; background:#fff; border:1px solid #ccc; color:#222; border-radius:999px; font-size:13px; }
</style>

</head>
<body>
<div id="app">
  <div class="card">
    <h1>Teknos TEKNOCEILING Competition</h1>
    <div class="sub">Enter to win. Winner drawn every hour.</div>

    <form id="leadForm">
      <label>First name *</label>
      <input required name="firstName" />

      <label>Last name *</label>
      <input required name="lastName" />

      <label>Company *</label>
      <input required name="company" />

      <label>Email *</label>
      <input required type="email" name="email" />

      <label>Phone</label>
      <input name="phone" />

      <label class="checkbox-row">
        <input type="checkbox" name="marketingOptIn">
        <span>Yes, send me occasional product updates & events.</span>
      </label>

      <label class="checkbox-row">
        <input required type="checkbox" name="consent">
        <span>I consent to Teknos storing my details for this competition and follow-up.</span>
      </label>

      <button type="submit" id="btnSubmit">Submit</button>
      <div class="msg" id="msg"></div>
    </form>

    <div class="thankyou" id="thankYou">
      <h2>âœ… You're entered!</h2>
      <p>Screen resets shortly...</p>
    </div>
  </div>
</div>

<div class="kiosk">
  <button id="btnSync">Sync now</button>
</div>

<script>
const ENDPOINT = "https://script.google.com/macros/s/AKfycbzk6XFWCvFJ0WU3zoig5OVVU6cIP6s7LpQ4GMnoKm_uBywBclZdUHm4fyRAKdjJaw9T/exec";
const BRAND_EVENT = "TEKNOCEILING Competition";
const queueKey = "teknosLeadQueue";

const getQueue = () => JSON.parse(localStorage.getItem(queueKey) || "[]");
const setQueue = q => localStorage.setItem(queueKey, JSON.stringify(q));
const addToQueue = p => { let q=getQueue(); q.push(p); setQueue(q); };
const popQueue = () => { let q=getQueue(); let i=q.shift(); setQueue(q); return i; };

async function sendPayload(payload){
  await fetch(ENDPOINT,{
    method:"POST",
    headers:{"Content-Type":"text/plain;charset=utf-8"},
    body:JSON.stringify(payload)
  });
}

function showThank(){
  document.getElementById("leadForm").style.display="none";
  document.getElementById("thankYou").style.display="block";
  setTimeout(()=>location.reload(),3500);
}

document.getElementById("leadForm").addEventListener("submit",async e=>{
  e.preventDefault();
  const fd=new FormData(e.target);
  const payload={
    event:BRAND_EVENT,
    firstName:fd.get("firstName").trim(),
    lastName:fd.get("lastName").trim(),
    company:fd.get("company").trim(),
    email:fd.get("email").trim(),
    phone:fd.get("phone").trim(),
    marketingOptIn:fd.get("marketingOptIn")?true:false,
    consent:true,
    userAgent:navigator.userAgent
  };
  try{ await sendPayload(payload); }
  catch{ addToQueue(payload); }
  showThank();
});

document.getElementById("btnSync").addEventListener("click",async()=>{
  while(getQueue().length){
    try{ await sendPayload(popQueue()); }
    catch{ break; }
  }
  alert("Synced any stored entries.");
});
</script>
</body>
</html>
