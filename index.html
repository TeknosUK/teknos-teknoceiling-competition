<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Teknos TEKNOCEILING Competition</title>

<!-- Font: Titillium Web -->
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;600;700&display=swap" rel="stylesheet" />

<style>
:root{
  --brand:#007050;
  --bg:#f5f7f8;
  --card:#ffffff;
  --text:#0f1720;
  --muted:#5b6570;
  --danger:#b00020;
  --ok:#0f9d58;
}

body{
  background:var(--bg);
  margin:0;
  font-family:'Titillium Web', sans-serif;
  font-weight:300;
}

#app{ max-width:600px; margin:0 auto; padding:24px; }

.card{
  background:var(--card);
  padding:32px;
  border-radius:20px;
  box-shadow:0 4px 24px rgba(0,0,0,0.07);
}

/* Headings */
h1{
  font-size:30px;
  font-weight:600;
  margin:0 0 8px;
}
.sub{
  font-size:16px;
  color:var(--muted);
  margin-bottom:28px;
}

/* Fields */
label{
  font-size:16px;
  font-weight:600;
  margin-top:16px;
  display:block;
}

input{
  width:100%;
  padding:14px 18px; /* increased right padding here */
  margin-top:6px;
  border-radius:12px;
  background:#fff;
  border:1px solid #dfe5ea;
  font-size:16px;
  font-family:'Titillium Web', sans-serif;
  font-weight:300;
}
input:focus{
  border-color:var(--brand);
  outline:none;
}

/* Checkboxes */
.checkbox-row{
  display:flex;
  gap:10px;
  margin-top:16px;
  font-size:15px;
  line-height:1.3;
}

/* Button */
button{
  width:100%;
  padding:14px;
  margin-top:26px;
  border:none;
  border-radius:12px;
  font-size:18px;
  font-weight:600;
  cursor:pointer;
}
#btnSubmit{
  background:var(--brand);
  color:white;
}
#btnSubmit:hover{
  background:#00563e;
}

/* Thank You */
.thankyou{
  display:none;
  text-align:center;
  padding:40px 10px;
}
.thankyou h2{
  font-size:30px;
  font-weight:700;
}

/* Offline Sync Button */
.kiosk{
  position:fixed;
  right:14px;
  bottom:14px;
  display:flex;
  gap:8px;
}
.kiosk button{
  width:auto;
  padding:8px 12px;
  background:#fff;
  border:1px solid #ccc;
  color:#222;
  border-radius:999px;
  font-size:13px;
}
</style>
</head>

<body>
<div id="app">
  <div class="card">

    <h1>TEKNOCEILING Competition</h1>
    <div class="sub">Enter to win. Winner drawn every hour.</div>

    <form id="leadForm">
      <label>First name *</label>
      <input required name="firstName">

      <label>Last name *</label>
      <input required name="lastName">

      <label>Company *</label>
      <input required name="company">

      <label>Email *</label>
      <input required type="email" name="email">

      <label>Phone</label>
      <input name="phone">

      <label class="checkbox-row">
        <input type="checkbox" name="marketingOptIn">
        <span>Yes, send me occasional product updates & events.</span>
      </label>

      <label class="checkbox-row">
        <input required type="checkbox" name="consent">
        <span>I consent to Teknos storing my details for this competition and follow-up.</span>
      </label>

      <button type="submit" id="btnSubmit">Submit</button>
    </form>

    <div class="thankyou" id="thankYou">
      <h2>âœ… You're entered!</h2>
      <p>Screen resets shortly...</p>
    </div>

  </div>
</div>

<div class="kiosk">
  <button id="btnSync">Sync now</button>
</div>

<script>
const ENDPOINT = "https://script.google.com/macros/s/AKfycbzk6XFWCvFJ0WU3zoig5OVVU6cIP6s7LpQ4GMnoKm_uBywBclZdUHm4fyRAKdjJaw9T/exec";
const BRAND_EVENT = "TEKNOCEILING Competition";
const queueKey = "teknosLeadQueue";

const getQueue = () => JSON.parse(localStorage.getItem(queueKey) || "[]");
const setQueue = q => localStorage.setItem(queueKey, JSON.stringify(q));
const addToQueue = p => { let q=getQueue(); q.push(p); setQueue(q); };
const popQueue = () => { let q=getQueue(); let i=q.shift(); setQueue(q); return i; };

async function sendPayload(payload){
  await fetch(ENDPOINT,{
    method:"POST",
    headers:{"Content-Type":"text/plain;charset=utf-8"},
    body:JSON.stringify(payload)
  });
}

function showThank(){
  leadForm.style.display="none";
  thankYou.style.display="block";
  setTimeout(()=>location.reload(),3500);
}

leadForm.addEventListener("submit", async e=>{
  e.preventDefault();
  const fd=new FormData(e.target);
  const payload={
    event:BRAND_EVENT,
    firstName:fd.get("firstName").trim(),
    lastName:fd.get("lastName").trim(),
    company:fd.get("company").trim(),
    email:fd.get("email").trim(),
    phone:fd.get("phone").trim(),
    marketingOptIn:fd.get("marketingOptIn")?true:false,
    consent:true,
    userAgent:navigator.userAgent
  };
  try{ await sendPayload(payload); }
  catch{ addToQueue(payload); }
  showThank();
});

btnSync.addEventListener("click", async()=>{
  while(getQueue().length){
    try{ await sendPayload(popQueue()); }
    catch{ break; }
  }
  alert("Synced any stored entries.");
});
</script>
</body>
</html>
